"use strict";var sessionId=sessionStorage.sessionId||"",userId=localStorage.userId||"",membermenu={init:function(){this.oLoad(),this.getMenu(),this.getPoint(),this.getOrder(),this.goCar(),this.oNext()},oLoad:function(){userId&&""!=userId||(window.location.href="login.html"),$(window).on("scroll",function(){var o=200,n=$(window).scrollTop();n>o?($(".m-nav-bottom").show(),$(".m-common-stick").show(),$(".m-common-go-top").show()):($(".m-nav-bottom").hide(),$(".m-common-stick").hide(),$(".m-common-go-top").hide())});var o=oDomain+"/home/cart/cartTotal",n={sessionId:sessionId};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){0==o.code&&$(".m-common-car em").text(o.data.count)}),$(".m-common-menu").on("click",function(){$(".m-common-menu-box").show()})},getMenu:function(){var o=oDomain+"/home/index/menuList";jsonData.getData(o,"GET",{},function(o){var n=template("menuTpl",o);if($(".m-common-menu-content-lists").html(n),o.data.other&&""!=o.data.other)for(var t=0;t<o.data.other.length;t++){'<div class="m-common-menu-content-list"><a href="'+o.data.other[t].href+'">'+o.data.other[t].name;$(".m-common-menu-content-lists").append()}membermenu.oMenu()}),$(".m-common-menu,.m-common-stick-menu").on("click",function(){$(".m-common-menu-box").show()})},oMenu:function(){$(".m-common-menu-content-list-header").each(function(o,n){$(n).on("click",function(){$(n).find(".jt img").toggleClass("fan"),$(n).siblings("ul").toggle()})}),$(".m-common-menu-content-header").find(".btn").on("click",function(){$(".m-common-menu-box").hide()}),$(".m-common-menu-close").on("click",function(){$(".m-common-menu-box").hide()})},getPoint:function(){var o=oDomain+"/home/user/userMenuShow",n={userId:userId};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){console.log(o),0==o.code&&($(".m-common-module-notice").find("em").text(o.data.consignee),$(".m-membermenu-page").find(".total-point").text(o.data.ck_user_point+"ポイント"))})},getOrder:function(){var o=oDomain+"/home/user/orderList",n={userId:userId,page:1};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){if(console.log(o),0==o.code&&o.data.length>0){var n=template("orderTpl",o);$(".m-membermenu-history tbody").html(n),$(".m-membermenu-history tbody").find("tr").each(function(o,n){$(n).on("click",function(){window.location.href="http://www.inkans.com/order-done-"+$(n).attr("data-go")+".html"})})}})},goCar:function(){$(".m-nav-bottom-car,.m-common-car").on("click",function(){window.location.href="shoppingcart.html"})},oNext:function(){$(".f-out").on("click",function(){var o=oDomain+"/home/user/logout",n={userId:userId};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){0==o.code&&(localStorage.removeItem("userId"),window.location.href="login.html")})})}};sessionId&&""!=sessionId?membermenu.init():getSession.data(function(){membermenu.init()});