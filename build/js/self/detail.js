"use strict";var goodsId=void 0,sessionId=sessionStorage.sessionId||"";goodsId=getQueryString("goodsId")?getQueryString("goodsId"):localStorage.goodsId?localStorage.goodsId:"";var detail={init:function(){this.oLoad(),this.getMenu(),this.getDetail(),this.getIncar(),this.goCar()},oLoad:function(){$(window).on("scroll",function(){var o=200,n=$(window).scrollTop();n>o?($(".m-nav-bottom").show(),$(".m-common-stick").show(),$(".m-common-go-top").show()):($(".m-nav-bottom").hide(),$(".m-common-stick").hide(),$(".m-common-go-top").hide())});var o=oDomain+"/home/cart/cartTotal",n={sessionId:sessionId};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){0==o.code&&$(".m-common-car em").text(o.data.count)}),$(".m-common-menu").on("click",function(){$(".m-common-menu-box").show()}),$(".m-detail-backbtn").on("click",function(){window.history.back()})},getMenu:function(){var o=oDomain+"/home/index/menuList";jsonData.getData(o,"GET",{},function(o){console.log(o);var n=template("menuTpl",o);if($(".m-common-menu-content-lists").html(n),o.data.other&&""!=o.data.other)for(var t=0;t<o.data.other.length;t++){'<div class="m-common-menu-content-list"><a href="'+o.data.other[t].href+'">'+o.data.other[t].name;$(".m-common-menu-content-lists").append()}detail.oMenu()}),$(".m-common-menu,.m-common-stick-menu").on("click",function(){$(".m-common-menu-box").show()})},oMenu:function(){$(".m-common-menu-content-list-header").each(function(o,n){$(n).on("click",function(){$(n).find(".jt img").toggleClass("fan"),$(n).siblings("ul").toggle()})}),$(".m-common-menu-content-header").find(".btn").on("click",function(){$(".m-common-menu-box").hide()}),$(".m-common-menu-close").on("click",function(){$(".m-common-menu-box").hide()})},goCar:function(){$(".m-nav-bottom-car,.m-common-car").on("click",function(){window.location.href="shoppingcart.html"})},getDetail:function(){var o=oDomain+"/home/Goods/goodsInfo",n={goodsId:goodsId};jsonData.getData(o,"GET",{data:JSON.stringify(n)},function(o){console.log(o),0==o.code?(console.log(o.data),$(".m-detail-product .pic img").attr({src:o.data.goods_img}),$(".m-detail-product .name").text(o.data.goods_name),"1"!=o.data.fast&&$(".f-fast").hide(),"1"!=o.data.ten_years&&$(".f-years").hide(),"1"!=o.data.shadow&&$(".f-shadow").hide(),"1"!=o.data.dummy&&$(".f-dummy").hide(),$(".m-detail-engravingins").html(o.data.goods_desc)):console.error("请求失败")})},getIncar:function(){$(".m-detail-addcar").on("click",function(){$(".m-common-spinner").show();var o=sessionStorage.sessionId||"",n=sessionStorage.userId||0,t=$("#num").val()||1;if(o&&""!=o){var a=oDomain+"/home/cart/addToCart",e={sessionId:o,userId:n,goodsId:goodsId,number:t};jsonData.getData(a,"GET",{data:JSON.stringify(e)},function(o){$(".m-common-spinner").hide(),0==o.code&&(window.location.href="shoppingcart.html")})}else getSession.data(function(){var a=oDomain+"/home/cart/addToCart",e={sessionId:o,userId:n,goodsId:goodsId,number:t};jsonData.getData(a,"GET",{data:JSON.stringify(e)},function(o){$(".m-common-spinner").hide(),0==o.code&&(window.location.href="shoppingcart.html")})})})}};sessionId&&""!=sessionId?detail.init():getSession.data(function(){detail.init()});