"use strict";$(function(){var t={init:function(){this.oLoad(),this.getBanner(),this.getNews(),this.getModules(),this.getTab(),this.getMenu(),this.goCar()},oLoad:function(){var t=oDomain+"/home/index/getSessionId";jsonData.getData(t,"GET",{},function(n){if(0==n.code){sessionStorage.sessionId=n.data.session_id,t=oDomain+"/home/cart/cartTotal";var o={sessionId:n.data.session_id};jsonData.getData(t,"GET",{data:JSON.stringify(o)},function(t){0==t.code&&($(".m-common-car em").text(t.data.count),$(".m-nav-bottom-car-number").text(t.data.count))})}else failLoad()}),$(window).on("scroll",function(){var t=$(".m-index-news").offset().top,n=$(window).scrollTop();n>t?($(".m-nav-bottom").show(),$(".m-common-stick").show(),$(".m-common-go-top").show()):($(".m-nav-bottom").hide(),$(".m-common-stick").hide(),$(".m-common-go-top").hide())}),t=oDomain+"/home/index/indexBaseInfo",jsonData.getData(t,"GET",{},function(t){0==t.code&&(console.log(t),t.data.title&&""!=t.data.title&&null!=t.data.title&&$("title").text(t.data.title),t.data.keywords&&""!=t.data.keywords&&null!=t.data.keywords&&$("head").append("<meta name='Keywords' Content='"+t.data.keywords+"'>"),t.data.description&&""!=t.data.description&&null!=t.data.description&&$("head").append("<meta name='Description' Content='"+t.data.description+"'>"),t.data.pagedesc&&""!=t.data.pagedesc&&null!=t.data.pagedesc?$(".m-index-banner").find(".m-index-title").html(t.data.pagedesc):$(".m-index-banner").find(".m-index-title").hide())})},getBanner:function(){var t=oDomain+"/home/banner/bannerlistindex";jsonData.getData(t,"GET",{},function(t){console.log(t);var n=template("bannerTpl",t);$(".m-index-banner").find(".swiper-wrapper").html(n);new Swiper(".swiper-container-banner",{autoplay:3e3,loop:!0,direction:"horizontal",autoplayDisableOnInteraction:!1,pagination:".swiper-banner-pagination"})})},getNews:function(){var t=oDomain+"/home/news/newslistindex";jsonData.getData(t,"GET",{},function(t){console.log(t);var n=template("newsTpl",t);$(".swiper-news-container .swiper-wrapper").html(n);new Swiper(".swiper-news-container",{autoplay:3e3,loop:!0,direction:"vertical"})})},getModules:function(){var n=oDomain+"/home/index/moduleList";if(sessionStorage.modulelist&&""!=sessionStorage.modulelist){console.log(JSON.parse(sessionStorage.modulelist));var o=template("moduleTpl",JSON.parse(sessionStorage.modulelist));$("#product-box").html(o),t.touchChange(".m-product-list-content-box li,.m-product-list-swiper-content li,.onelist"),t.closeMore(),t.goInfo()}else jsonData.getData(n,"GET",{},function(n){console.log(n),sessionStorage.modulelist=JSON.stringify(n);var o=template("moduleTpl",n);$("#product-box").html(o),t.touchChange(".m-product-list-content-box li"),t.closeMore(),t.goInfo()})},goInfo:function(){$(".m-product-category-list .onelist").each(function(t,n){$(n).on("click",function(){localStorage.catId=$(n).attr("data-id"),window.location.href="./classify.html"})}),$(".m-product-category-list li").each(function(t,n){$(n).on("click",function(){localStorage.catId=$(n).attr("data-id"),window.location.href="./classify.html"})}),$(".m-product-goods-list .onelist").each(function(t,n){$(n).on("click",function(){localStorage.catId=$(n).attr("data-id"),window.location.href="./classify.html"})}),$(".m-product-goods-list li").each(function(t,n){$(n).on("click",function(){localStorage.goodsId=$(n).attr("data-id"),window.location.href="./detail.html?goodsId="+$(n).attr("data-id")})}),$(".m-product-shuffling-list li").each(function(t,n){$(n).on("click",function(){localStorage.goodsId=$(n).attr("data-id"),window.location.href="./detail.html?goodsId="+$(n).attr("data-id")})})},closeMore:function(){$(".m-product-list-content-more").each(function(t,n){$(n).on("click",function(){$(n).toggleClass("f-open"),$(n).hasClass("f-open")?$(n).text("閉じる　↑"):$(n).text("個人印鑑をもっと見る　↓"),$(n).parents(".m-product-list-content").find(".m-product-list-more-content").toggle()})})},getTab:function(){var n=oDomain+"/home/news/newslistindex",o={type:"Newest"};jsonData.getData(n,"GET",{data:JSON.stringify(o)},function(t){sessionStorage.Newest=JSON.stringify(t);var n=template("tabTpl",t);$(".m-index-tab-intelligence-lists").html(n)}),o={type:"knowledge"},jsonData.getData(n,"GET",{data:JSON.stringify(o)},function(t){sessionStorage.knowledgeInfo=JSON.stringify(t);var n=template("tabTpl",t);$(".m-index-tab-knowledge-lists").html(n)}),$(".m-tab-header .jt").hasClass("jtx")?($(".m-index-tab-knowledge-lists").hide(),$(".m-index-tab-intelligence-lists").show()):$(".m-tab-header .jt").hasClass("right-cur")&&($(".m-index-tab-intelligence-lists").hide(),$(".m-index-tab-knowledge-lists").show()),t.changeTab()},changeTab:function(){$(".m-index-tab").on("click",".m-tab-intelligence,.m-tab-knowledge",function(){$(this).find(".btn").addClass("cur"),$(this).siblings(".f-tab").find(".btn").removeClass("cur"),$(this).hasClass("m-tab-intelligence")?($(".m-index-tab .jt").addClass("jtx").removeClass("right-cur"),$(".m-index-tab-knowledge-lists").hide(),$(".m-index-tab-intelligence-lists").show()):($(".m-index-tab .jt").addClass("right-cur").removeClass("jtx"),$(".m-index-tab-intelligence-lists").hide(),$(".m-index-tab-knowledge-lists").show())})},getMenu:function(){var n=oDomain+"/home/index/menuList";jsonData.getData(n,"GET",{},function(n){console.log(n);var o=template("menuTpl",n);if($(".m-common-menu-content-lists").html(o),n.data.other&&""!=n.data.other)for(var e=0;e<n.data.other.length;e++){'<div class="m-common-menu-content-list"><a href="'+n.data.other[e].href+'">'+n.data.other[e].name;$(".m-common-menu-content-lists").append()}t.oMenu()}),$(".m-common-menu,.m-common-stick-menu").on("click",function(){$(".m-common-menu-box").show()})},oMenu:function(){$(".m-common-menu-content-list-header").each(function(t,n){$(n).on("click",function(){$(n).find(".jt img").toggleClass("fan"),$(n).siblings("ul").toggle()})}),$(".m-common-menu-content-header").find(".btn").on("click",function(){$(".m-common-menu-box").hide()}),$(".m-common-menu-close").on("click",function(){$(".m-common-menu-box").hide()})},goCar:function(){$(".m-nav-bottom-car,.m-common-car").on("click",function(){window.location.href="shoppingcart.html"})},touchChange:function(t){$(t).on("touchstart",function(t){$(this).addClass("default-touch")}),$(t).on("touchend",function(t){$(this).removeClass("default-touch")})}};t.init()});